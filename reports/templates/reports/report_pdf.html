{% load static %}
<!doctype html>
<html lang="sv">
<head>
  <meta charset="utf-8">
  <title>Kompetensrapport</title>
  <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
<link rel="stylesheet" href="{% static 'reports/css/report.css' %}">
<link href="https://fonts.googleapis.com/css2?family=Work+Sans:wght@400;600;700;800&display=swap" rel="stylesheet">
<script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
</head>
<body>
  <div class="report-page">
    <h1>Kompetensrapport</h1>
    {% include "reports/_report_content.html" %}
    <script>
(function () {
  const elLabels = document.getElementById("radar-labels");
  const elValues = document.getElementById("radar-values");
  const canvas = document.getElementById("radarChart");
  if (!elLabels || !elValues || !canvas) return;

  const labels = JSON.parse(elLabels.textContent);
  const values = JSON.parse(elValues.textContent);

  const ctx = canvas.getContext("2d");
  new Chart(ctx, {
    type: "radar",
    data: {
      labels,
      datasets: [{
        data: values,
        fill: true,
        borderWidth: 2,
        pointRadius: 3,
        pointHoverRadius: 4
      }]
    },
    options: {
      responsive: true,
      maintainAspectRatio: false,
      plugins: {
        legend: { display: false },
        tooltip: { enabled: false }
      },
      scales: {
        r: {
          min: 0,
          max: 30,
          ticks: { display: false },
          pointLabels: { font: { size: 12 } },
          grid: { circular: true }
        }
      }
    }
  });
})();
</script>

  </div>

  {% if competencies %}
  <script>
    const labels = {{ chart_labels|safe }};
    const values = {{ chart_values|safe }};

    const ctx = document.getElementById('competencyChart').getContext('2d');
    new Chart(ctx, {
      type: 'bar',
      data: {
        labels: labels,
        datasets: [{ label: 'Kompetenspo√§ng', data: values }]
      },
      options: { responsive: true, animation: false, scales: { y: { beginAtZero: true, max: 5 } } }
    });
  </script>
  
  {% endif %}
</body>
</html>